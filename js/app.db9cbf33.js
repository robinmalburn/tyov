(function(){var e={1994:function(){},7224:function(e,t){"use strict";var o=Date.now();t.A=(e="uuid")=>(++o,`${e}-${o}-${Date.now()}`)},4230:function(e,t,o){"use strict";var r=o(5471),i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"p-6 flex flex-col min-h-screen",attrs:{id:"app"}},[t("HeadingComponent",{staticClass:"text-center",attrs:{level:"1"}},[e._v("TYOV ~ Companion")]),t("NotificationPane"),t("div",{staticClass:"flex flex-col md:flex-row flex-grow"},[t("div",{staticClass:"flex-1"},[t("SlideDownPanelComponent",{staticClass:"flex-1",scopedSlots:e._u([{key:"closed-heading",fn:function(){return[e._v(" Open Actions ")]},proxy:!0}])},[t("ActionsPane"),t("PromptsPane")],1),t("div",{staticClass:"flex-1"},[t("MemoriesPane")],1)],1),t("div",{staticClass:"flex-1"},[t("MarksPane"),t("SkillsPane"),t("ResourcesPane"),t("CharactersPane")],1)]),t("div",{staticClass:"border-t mt-4 text-right"},[t("ul",[t("li",[t("a",{staticClass:"hover:text-gray-400",attrs:{href:"https://www.version1.net/"},domProps:{innerHTML:e._s(e.copyright)}})]),t("li",[t("a",{staticClass:"hover:text-gray-400",attrs:{href:"https://thousandyearoldvampire.com/"},domProps:{innerHTML:e._s("Thousand Year Old Vampire Copyright &copy; Tim Hutchings")}})])])])],1)},n=[],a=function(){var e=this,t=e._self._c;return t("CardComponent",{attrs:{id:"actions"}},[t("HeadingComponent",{attrs:{level:"2"}},[e._v("Actions")]),t("div",{staticClass:"m-2 text-center"},[t("div",{staticClass:"grid grid-cols-2 grid-rows-2 gap2"},[t("span",{staticClass:"text-gray-300 dark:text-gray-500"},[e._v("Last roll:")]),t("span",[e._v("Current roll: ")]),t("span",{staticClass:"text-gray-300 dark:text-gray-500"},[e._v(e._s(e.lastRoll))]),t("span",[e._v(e._s(e.currentRoll))])]),t("ButtonComponent",{staticClass:"w-full my-2",attrs:{type:"primary"},on:{click:e.roll}},[e._v(" Roll ")])],1),t("SaveMenuComponent"),t("LoadMenuComponent")],1)},s=[],l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-4 p-4 border rounded border-gray-100 shadow-md hover:shadow-xl transition-all"},[e._t("default")],2)},d=[],c={name:"CardComponent"},u=c,m=o(1656),p=(0,m.A)(u,l,d,!1,null,null,null),y=p.exports,g=function(){var e=this,t=e._self._c;return t("button",{staticClass:"py-1 px-4 rounded transition-colors focus:outline-none focus:ring-2 ring-0",class:e.typeClasses,on:{click:function(t){return e.$emit("click")}}},[e._t("default")],2)},h=[];const v={default:{"bg-gray-200":!0,"hover:bg-gray-400":!0,"ring-gray-100":!0},primary:{"bg-red-700":!0,"hover:bg-red-900":!0,"text-white":!0,"ring-red-600":!0},secondary:{"bg-indigo-400":!0,"hover:bg-indigo-600":!0,"text-white":!0,"ring-indigo-300":!0}};var f={name:"ButtonComponent",props:{type:{type:String,default:"default",valiator:e=>v.keys().includes(e)}},computed:{typeClasses(){return v[this.type]}}},C=f,w=(0,m.A)(C,g,h,!1,null,null,null),k=w.exports;const x=[{"text-3xl":!0},{"text-2xl":!0},{"text-xl":!0},{"text-base":!0},{"text-sm":!0},{"text-sm":!0}];var _,b,A={name:"HeadingComponent",functional:!0,props:{level:{type:String,default:"1",validator:e=>["1","2","3","4","5","6"].includes(e)}},render:function(e,t){const o=t.data.class||{};if(t.data.staticClass&&(o[t.data.staticClass]=!0),t.data.attrs&&t.data.attrs.class){const e=t.data.attrs.class.split(" ");for(const t of e)o[t]=!0}return e(`h${Math.min(6,Math.max(1,t.props.level))}`,{...t.data,class:{"font-semibold":!0,"leading-loose":!0,"tracking-widest":!0,"text-indigo-800":!0,...o,...x[t.props.level-1]}},t.children)}},M=A,P=(0,m.A)(M,_,b,!1,null,null,null),R=P.exports,S=function(){var e=this,t=e._self._c;return t("SlideDownPanelComponent",{scopedSlots:e._u([{key:"closed-heading",fn:function(){return[e._v(" Save ")]},proxy:!0}]),model:{value:e.saving,callback:function(t){e.saving=t},expression:"saving"}},[t("div",{staticClass:"grid grid-rows gap-1 my-2"},[t("a",{ref:"download",staticClass:"hidden",attrs:{download:"save-game",target:"_blank",href:"about:blank"}}),t("ButtonComponent",{staticClass:"w-full",on:{click:e.toFile}},[e._v(" To File ")]),e.supportsLocalStorage?t("ButtonComponent",{staticClass:"w-full",on:{click:e.toLocalStorage}},[e._v(" To Local Storage ")]):e._e()],1)])},E=[],D=(o(4603),o(7566),o(8721),function(){var e=this,t=e._self._c;return t("div",{class:e.classes},[t("ButtonComponent",{staticClass:"w-full",attrs:{type:e.type},on:{click:e.toggle}},[e.shouldShow?e._t("open-heading",(function(){return[e._v(" Close ")]})):e._t("closed-heading",(function(){return[e._v(" Show ")]}))],2),e.shouldShow?e._t("default"):e._e()],2)}),N=[],$={name:"SlideDownPanelComponent",model:{prop:"open",event:"change"},props:{open:{type:Boolean,default:!1}},data(){return{isOpen:this.open}},components:{ButtonComponent:k},computed:{shouldShow(){return this.isOpen},type(){return this.shouldShow?"secondary":"default"},classes(){return{"my-2":!0,"transition-all":!0,"p-4":this.shouldShow,border:this.shouldShow,rounded:this.shouldShow,"border-indigo-200":this.shouldShow,"shadow-md":this.shouldShow,"hover:shadow-xl":this.shouldShow}}},methods:{toggle(){this.isOpen=!this.isOpen,this.$emit("change",this.isOpen)}},watch:{open(e){this.isOpen=e}}},T=$,F=(0,m.A)(T,D,N,!1,null,null,null),O=F.exports,Y=(o(6573),o(8100),o(7936),o(7467),o(4732),o(9577),o(8992),o(3949),o(4979),o(2473));o(4114);class L{constructor(){(0,Y.A)(this,"migrations",[])}async gatherMigrations(e){const t=[],o=this.migrations.length;for(let r=0;r<o;r++){const o=this.migrations[r],i=await o(e);i&&t.push(i.default)}return t}async migrate(e,t){if(e.__SIGNATURE__===t)return e;const o=await this.gatherMigrations(e.__SIGNATURE__);return o.sort(((e,t)=>e.requiredSignature||t.requiredSignature?!e.requiredSignature&&t.requiredSignature||e.requiredSignature&&t.requiredSignature&&e.requiredSignature>t.requiredSignature?1:e.requiredSignature&&!t.requiredSignature||e.requiredSignature&&t.requiredSignature&&e.requiredSignature<t.requiredSignature?-1:0:0)),o.forEach((t=>{t.requiredSignature?(console.info(`Running Migration: ${t.description}`),e=t.migrate(e)):console.warn(`Skipping migration with missing signature.  Description: ${t.description}`)})),e}register(...e){e.forEach((e=>{this.migrations.push(e)}))}unregister(...e){e.forEach((e=>{const t=this.migrations.indexOf(e);this.migrations.splice(t,1)}))}}const H=new L;H.register((async e=>e<1&&o.e(688).then(o.bind(o,4688))),(async e=>e<1&&o.e(22).then(o.bind(o,4022))),(async e=>e<1&&o.e(310).then(o.bind(o,1310))),(async e=>e<1&&o.e(683).then(o.bind(o,9683))),(async e=>e<1&&o.e(84).then(o.bind(o,2084))),(async e=>e<1&&o.e(342).then(o.bind(o,6342))),(async e=>e<2&&o.e(546).then(o.bind(o,8546))));var U=H;const B=2,I=e=>({d6:e.state.actions.d6,d10:e.state.actions.d10,lastRoll:e.state.actions.lastRoll,prompts:e.state.actions.prompts,currentPromptIdx:e.state.actions.currentPromptIdx,characters:e.state.characters.characters,marks:e.state.marks.marks,memories:e.state.memories.memories,events:e.state.memories.events,resources:e.state.resources.resources,diaries:e.state.resources.diaries,skills:e.state.skills.skills,__SIGNATURE__:B}),q=e=>{const t={actions:{d6:NaN,d10:NaN,lastRoll:"?",currentPromptIdx:0,prompts:[]},characters:{characters:[]},marks:{marks:[]},memories:{memories:[],events:[]},skills:{skills:[]},resources:{resources:[],diaries:[]}};return e?{...t[e]??{}}:{...t.actions,...t.characters,...t.marks,...t.memories,...t.resources,...t.skills}},j=async(e,t)=>{t={...q(),...t},t=await U.migrate(t,B),e.commit("actions/saveRoll",t.lastRoll??"?"),e.commit("actions/setD6",t.d6??NaN),e.commit("actions/setD10",t.d10??NaN),e.commit("actions/setCurrentPromptIdx",t.currentPromptIdx??0);const o=Array.isArray(t.prompts)?t.prompts:[];o.forEach((e=>{e.page=parseInt(e.page,10),e.count=parseInt(e.count,10)})),e.commit("actions/setPrompts",o),e.commit("characters/set",Array.isArray(t.characters)?t.characters:[]),e.commit("marks/set",Array.isArray(t.marks)?t.marks:[]),e.commit("memories/setMemories",Array.isArray(t.memories)?t.memories:[]),e.commit("memories/setEvents",Array.isArray(t.events)?t.events:[]),e.commit("resources/setResources",Array.isArray(t.resources)?t.resources:[]),e.commit("resources/setDiaries",Array.isArray(t.diaries)?t.diaries:[]),e.commit("skills/set",Array.isArray(t.skills)?t.skills:[])},J=e=>{let t;try{t=JSON.stringify(e)}catch(i){throw"Unable to serialize data structure."}const o=t.length,r=new Uint16Array(o);for(let n=0;n<o;n++)r[n]=t.charCodeAt(n);return btoa(String.fromCharCode(...new Uint8Array(r.buffer)))},z=e=>{const t=atob(e),o=t.length,r=new Uint8Array(o);for(let n=0;n<o;n++)r[n]=t.charCodeAt(n);try{return JSON.parse(String.fromCharCode(...new Uint16Array(r.buffer)))}catch(i){throw"Unable to parse deserialised data."}},G=()=>{var e=window.localStorage;try{var t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(o){return o instanceof DOMException&&(22===o.code||1014===o.code||"QuotaExceededError"===o.name||"NS_ERROR_DOM_QUOTA_REACHED"===o.name)&&e&&0!==e.length}},Q=(e,t)=>{"string"!==typeof t&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)},V=e=>{let t=window.localStorage.getItem(e);if(null===t)return null;try{return JSON.parse(t)}catch{return t}};var K={set:Q,get:V,supported:G},W={name:"SaveMenuComponent",data(){return{saving:!1}},components:{SlideDownPanelComponent:O,ButtonComponent:k},computed:{supportsLocalStorage(){return G()}},methods:{toFile(){const e=J(I(this.$store));this.$refs.download.href=URL.createObjectURL(new Blob([e],{type:"text/plain"})),this.$refs.download.click(),this.saving=!1},toLocalStorage(){const e=J(I(this.$store));K.set("save-game",e),this.saving=!1}}},X=W,Z=(0,m.A)(X,S,E,!1,null,null,null),ee=Z.exports,te=function(){var e=this,t=e._self._c;return t("SlideDownPanelComponent",{scopedSlots:e._u([{key:"closed-heading",fn:function(){return[e._v(" Load ")]},proxy:!0}]),model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("div",{staticClass:"grid grid-rows gap-1 my-2"},[t("input",{ref:"upload",staticClass:"hidden",attrs:{type:"file"},on:{change:e.load}}),t("ButtonComponent",{staticClass:"w-full",on:{click:function(t){return e.$refs.upload.click()}}},[e._v(" From File ")]),e.supportsLocalStorage?t("ButtonComponent",{staticClass:"w-full",on:{click:e.fromLocalStorage}},[e._v(" From Local Storage ")]):e._e()],1)])},oe=[],re=o(5353),ie={name:"LoadMenuComponent",data(){return{loading:!1}},components:{ButtonComponent:k,SlideDownPanelComponent:O},computed:{supportsLocalStorage:G},methods:{...(0,re.PY)("notifications",["hide"]),...(0,re.i0)("notifications",["showNotification"]),load(e){if(1!==e.target.files.length)return void this.showNotification({message:"Unable to load file.  You must select one file to load.",type:"warning"});this.hide();const t=e.target.files[0],o=new FileReader;o.onload=()=>{try{const e=z(o.result);j(this.$store,e),this.loading=!1}catch(e){this.showNotification({message:"Unable to decode save state.",type:"danger"})}},o.onerror=()=>{this.showNotification({message:"Unable to read file.",type:"danger"})},o.readAsText(t)},fromLocalStorage(){this.hide();try{const e=z(K.get("save-game"));j(this.$store,e)}catch(e){this.showNotification({message:"Unable to decode save state.",type:"danger"})}this.loading=!1}}},ne=ie,ae=(0,m.A)(ne,te,oe,!1,null,null,null),se=ae.exports,le={name:"ActionsPane",components:{ButtonComponent:k,CardComponent:y,HeadingComponent:R,SaveMenuComponent:ee,LoadMenuComponent:se},computed:{...(0,re.L8)("actions",["die","currentRoll"]),...(0,re.aH)("actions",["d6","d10","lastRoll"])},methods:{...(0,re.i0)("actions",["roll"])}},de=le,ce=(0,m.A)(de,a,s,!1,null,null,null),ue=ce.exports,me=function(){var e=this,t=e._self._c;return t("CardComponent",{attrs:{id:"characters"}},[t("HeadingComponent",{attrs:{level:"2"}},[e._v("Characters")]),t("FormToggleComponent",{attrs:{"show-controls":e.showAddingControls},on:{save:e.validatedAdd,toggle:e.toggleAddingControls},scopedSlots:e._u([{key:"button",fn:function(){return[e._v(" Add a new Character? ")]},proxy:!0},{key:"form",fn:function(){return[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newCharacter.name,expression:"newCharacter.name"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"text",placeholder:"Name"},domProps:{value:e.newCharacter.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validatedAdd.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.newCharacter,"name",t.target.value)}}}),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newCharacter.bio,expression:"newCharacter.bio"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200 resize-none",attrs:{placeholder:"Bio"},domProps:{value:e.newCharacter.bio},on:{input:function(t){t.target.composing||e.$set(e.newCharacter,"bio",t.target.value)}}}),e._v(" "),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newCharacter.immortal,expression:"newCharacter.immortal"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.newCharacter.immortal)?e._i(e.newCharacter.immortal,null)>-1:e.newCharacter.immortal},on:{change:function(t){var o=e.newCharacter.immortal,r=t.target,i=!!r.checked;if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.newCharacter,"immortal",o.concat([n])):a>-1&&e.$set(e.newCharacter,"immortal",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.newCharacter,"immortal",i)}}}),e._v(" Immortal? ")]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newCharacter.dead,expression:"newCharacter.dead"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.newCharacter.dead)?e._i(e.newCharacter.dead,null)>-1:e.newCharacter.dead},on:{change:function(t){var o=e.newCharacter.dead,r=t.target,i=!!r.checked;if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.newCharacter,"dead",o.concat([n])):a>-1&&e.$set(e.newCharacter,"dead",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.newCharacter,"dead",i)}}}),e._v(" Dead? ")])]},proxy:!0}])}),t("FormComponent",{directives:[{name:"show",rawName:"v-show",value:e.showEditingControls,expression:"showEditingControls"}],ref:"editForm",staticClass:"my-2",attrs:{buttons:[{type:"default",event:"save",label:"Save"},{type:"default",event:"cancel",label:"Cancel"},{type:"default",event:"remove",label:"Remove"}]},on:{save:e.validatedUpdate,cancel:e.closeEditingControls,remove:e.validatedRemove}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editCharacter.name,expression:"editCharacter.name"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"text",placeholder:"Name"},domProps:{value:e.editCharacter.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.add.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.editCharacter,"name",t.target.value)}}}),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editCharacter.bio,expression:"editCharacter.bio"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200 resize-none",attrs:{placeholder:"Bio"},domProps:{value:e.editCharacter.bio},on:{input:function(t){t.target.composing||e.$set(e.editCharacter,"bio",t.target.value)}}}),e._v(" "),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editCharacter.immortal,expression:"editCharacter.immortal"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.editCharacter.immortal)?e._i(e.editCharacter.immortal,null)>-1:e.editCharacter.immortal},on:{change:function(t){var o=e.editCharacter.immortal,r=t.target,i=!!r.checked;if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.editCharacter,"immortal",o.concat([n])):a>-1&&e.$set(e.editCharacter,"immortal",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.editCharacter,"immortal",i)}}}),e._v(" Immortal? ")]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editCharacter.dead,expression:"editCharacter.dead"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.editCharacter.dead)?e._i(e.editCharacter.dead,null)>-1:e.editCharacter.dead},on:{change:function(t){var o=e.editCharacter.dead,r=t.target,i=!!r.checked;if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.editCharacter,"dead",o.concat([n])):a>-1&&e.$set(e.editCharacter,"dead",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.editCharacter,"dead",i)}}}),e._v(" Dead? ")])]),t("transition-group",{staticClass:"my-2",attrs:{tag:"ul","enter-active-class":"transition-all duration-100 ease-out","leave-active-class":"transition-all duration-100 ease-in","enter-class":"opacity-0","enter-to-class":"opacity-100","leave-class":"opacity-100","leave-to-class":"opacity-0","move-class":"transition-transform duration-500 ease-in-out"}},e._l(e.characters,(function(o){return t("li",{key:`character-${o.id}`},[t("CardComponent",{class:{"bg-red-50":o.immortal}},[t("div",{staticClass:"flex border-b mb-2"},[t("HeadingComponent",{staticClass:"select-none flex-1",attrs:{level:"6"}},[t("div",{class:{"line-through":o.dead,"cursor-pointer":!0},on:{click:function(t){return e.validatedToggle(o)}}},[e._v(" "+e._s(o.name)+" "),o.immortal?t("span",[e._v("(Immortal)")]):e._e()])]),t("div",{staticClass:"flex-initial text-right"},[t("span",{staticClass:"cursor-pointer mx-2 hover:text-gray-400",on:{click:function(t){return e.startEdit(o)}}},[e._v(" Edit ")])])],1),t("div",[e._v(e._s(o.bio))])])],1)})),0)],1)},pe=[],ye=(o(7550),function(){var e=this,t=e._self._c;return t("div",[e._t("default"),t("div",{staticClass:"my-1 flex flex-col md:flex-row"},e._l(e.buttons,(function(o){return t("ButtonComponent",{key:`${o.label}-${o.type}`,staticClass:"flex-1 my-2 md:my-0 md:mx-2",attrs:{type:o.type},on:{click:function(t){return e.$emit(o.event)}}},[e._v(" "+e._s(o.label)+" ")])})),1)],2)}),ge=[],he=(o(3215),{name:"FormComponent",props:{buttons:{type:Array,default:()=>[{type:"default",event:"save",label:"Save"},{type:"default",event:"cancel",label:"Cancel"}],validator:e=>e.every((e=>{if("object"!==typeof e)return!1;const t=Object.keys(e);return t.includes("type")&&t.includes("event")&&t.includes("label")}))}},components:{ButtonComponent:k}}),ve=he,fe=(0,m.A)(ve,ye,ge,!1,null,null,null),Ce=fe.exports,we=function(){var e=this,t=e._self._c;return t("div",[e.showControls?t("div",[t("FormComponent",{on:{save:function(t){return e.$emit("save")},cancel:function(t){return e.$emit("toggle",e.showControls)}}},[e._t("form")],2)],1):t("ButtonComponent",{staticClass:"w-full",attrs:{type:e.type},on:{click:function(t){return e.$emit("toggle",e.showControls)}}},[e._t("button")],2)],1)},ke=[],xe={name:"FormToggleComponent",props:{showControls:{type:Boolean,default:!1},type:{type:String,default:"default",validator:e=>["default","primary","secondary"].includes(e)}},components:{ButtonComponent:k,FormComponent:Ce}},_e=xe,be=(0,m.A)(_e,we,ke,!1,null,null,null),Ae=be.exports,Me=o(7224);const Pe=(e,t="uuid")=>{const o=Se(e);return e.id||(o.id=(0,Me.A)(t)),o},Re=e=>null===e?e:Array.isArray(e)?Array.from(e):"object"===typeof e?{...e}:e,Se=e=>{if(null===e)return e;try{return JSON.parse(JSON.stringify(e))}catch(t){return console.error(`Error with deep data copy, falling back to shallow copy.  Error: ${t}`),Re(e)}},Ee=(e,t,o="id")=>{let r={entity:null,idx:null};return e.some(((e,i)=>{if(e[o]===t)return r={entity:e,idx:i},!0})),r},De="character";var Ne=(e={})=>({name:"",dead:!1,immortal:!1,bio:"",...Pe(e,De)}),$e={name:"CharactersPane",data:function(){return{showAddingControls:!1,showEditingControls:!1,editCharacter:Ne(),newCharacter:Ne()}},components:{CardComponent:y,FormComponent:Ce,FormToggleComponent:Ae,HeadingComponent:R},computed:{...(0,re.L8)("characters",["characters"])},methods:{...(0,re.PY)("notifications",{hideNotification:"hide"}),...(0,re.i0)("notifications",["showNotification"]),...(0,re.PY)("characters",["add","update","remove","toggle"]),validatedToggle(e){this.hideNotification(),this.editCharacter.id!==e.id?this.toggle(e):this.showNotification({message:"You cannot change this character whilst it is being edited.",type:"warning"})},validatedAdd(){""!==this.newCharacter.name&&""!==this.newCharacter.bio?(this.add(this.newCharacter),this.toggleAddingControls()):this.showNotification({message:"You must provide a name & bio.",type:"warning"})},validatedRemove(){let e;this.characters.some((t=>{if(t.id===this.editCharacter.id)return e=t,!0})),this.remove(e),this.closeEditingControls()},validatedUpdate(){""!==this.editCharacter.name&&""!==this.editCharacter.bio?(this.update(this.editCharacter),this.closeEditingControls()):this.showNotification({message:"You must provide a name & bio.",type:"warning"})},startEdit(e){this.editCharacter=Ne(e),this.showEditingControls=!0,this.$nextTick((()=>{const e=this.$refs.editForm.$el.getBoundingClientRect();window.scrollTo({top:e.y+window.scrollY,behavior:"smooth"})}))},toggleAddingControls(){this.hideNotification(),this.showAddingControls=!this.showAddingControls,this.newCharacter=Ne()},closeEditingControls(){this.hideNotification(),this.showEditingControls=!1,this.editCharacter=Ne()}}},Te=$e,Fe=(0,m.A)(Te,me,pe,!1,null,null,null),Oe=Fe.exports,Ye=(o(1454),function(){var e=this,t=e._self._c;return t("CardComponent",{attrs:{id:"prompts"}},[t("HeadingComponent",{attrs:{level:"2"}},[e._v("Prompts")]),t("FormToggleComponent",{attrs:{showControls:e.showControls},on:{save:e.validatedAddPrompt,toggle:e.toggleControls},scopedSlots:e._u([{key:"button",fn:function(){return[e._v(" Manually add Prompt? ")]},proxy:!0},{key:"form",fn:function(){return[t("div",{staticClass:"grid grid-rows md:grid-cols-2 gap-2"},[t("div",{staticClass:"grid grid grid-rows gap-2"},[t("label",{attrs:{for:"new-propt-number"}},[e._v(" Prompt Number: ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newPrompt.page,expression:"newPrompt.page"}],staticClass:"w-full shadow border rounded py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{id:"new-prompt-number",type:"number",step:"1",min:e.firstUnusedPrompt},domProps:{value:e.newPrompt.page},on:{input:function(t){t.target.composing||e.$set(e.newPrompt,"page",t.target.value)}}})]),t("div",{staticClass:"grid grid grid-rows gap-2"},[t("label",{attrs:{for:"new-prompt-count"}},[e._v(" Times visited: ")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.newPrompt.count,expression:"newPrompt.count"}],staticClass:"w-full shadow border rounded py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{id:"new-prompt-count"},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.newPrompt,"count",t.target.multiple?o:o[0])}}},e._l([1,2,3],(function(o){return t("option",{key:`visits-${o}`,domProps:{value:o}},[e._v(" "+e._s(o)+" ")])})),0)])]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.makeCurrent,expression:"makeCurrent"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.makeCurrent)?e._i(e.makeCurrent,null)>-1:e.makeCurrent},on:{change:function(t){var o=e.makeCurrent,r=t.target,i=!!r.checked;if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&(e.makeCurrent=o.concat([n])):a>-1&&(e.makeCurrent=o.slice(0,a).concat(o.slice(a+1)))}else e.makeCurrent=i}}}),e._v(" Current? ")])]},proxy:!0}])}),e.currentPrompt.page?t("div",{staticClass:"divide-y divide-gray-200 divide-dashed"},[t("div",{staticClass:"text-red-700 my-2"},[t("strong",[e._v("Current:")]),e._v(" "+e._s(e.currentPrompt.page)+": "),t("span",{domProps:{innerHTML:e._s(e.tally(e.currentPrompt.count))}})]),t("ol",{staticClass:"my-2 max-h-40 overflow-auto"},e._l(e.prompts,(function(o){return t("li",{key:`prompt-key-${o.id}`,staticClass:"select-none"},[t("div",{staticClass:"flex"},[t("div",{staticClass:"flex-initial w-6 text-center"},[t("span",{directives:[{name:"show",rawName:"v-show",value:o.page!==e.currentPrompt.page,expression:"prompt.page !== currentPrompt.page"}],staticClass:"cursor-pointer select-none hover:text-gray-400",attrs:{title:"Set as current prompt"},domProps:{innerHTML:e._s("&rarr;")},on:{click:function(t){return e.makePromptCurrent(o)}}})]),t("div",{staticClass:"flex-initial w-6 text-center"},[t("span",{directives:[{name:"show",rawName:"v-show",value:o.page!==e.currentPrompt.page,expression:"prompt.page !== currentPrompt.page"}],staticClass:"cursor-pointer select-none hover:text-gray-400",attrs:{title:"Remove prompt"},domProps:{innerHTML:e._s("&times;")},on:{click:function(t){return e.removePrompt(o)}}})]),t("div",{staticClass:"flex-initial w-6 text-center"},[t("span",{directives:[{name:"show",rawName:"v-show",value:o.count<3,expression:"prompt.count < 3"}],staticClass:"cursor-pointer select-none hover:text-gray-400",attrs:{title:"Increment visits"},domProps:{innerHTML:e._s("&plus;")},on:{click:function(t){return e.incrementPrompt(o)}}})]),t("div",{staticClass:"flex-initial w-6 text-center"},[t("span",{directives:[{name:"show",rawName:"v-show",value:o.count>1,expression:"prompt.count > 1"}],staticClass:"cursor-pointer select-none hover:text-gray-400",attrs:{title:"Decrement visits"},domProps:{innerHTML:e._s("&minus;")},on:{click:function(t){return e.decrementPrompt(o)}}})]),t("div",{staticClass:"flex-initial"},[t("span",{staticClass:"select-none",class:{"text-red-700":o.page===e.currentPrompt.page}},[t("span",{staticClass:"px-2"},[e._v(e._s(o.page)+":")]),t("span",{domProps:{innerHTML:e._s(e.tally(o.count))}})])])])])})),0)]):e._e()],1)}),Le=[];const He="prompt";var Ue=(e={})=>({page:1,count:0,...Pe(e,He)}),Be={name:"PromptsPane",data(){return{showControls:!1,newPrompt:Ue({page:1,count:1}),makeCurrent:!this.currentPrompt||!this.currentPrompt.page}},components:{CardComponent:y,FormToggleComponent:Ae,HeadingComponent:R},computed:{...(0,re.aH)("actions",["currentPromptPage"]),...(0,re.L8)("actions",["prompts","currentPrompt"]),tally(){return e=>{let t="",o="&omicron;";e>=3&&(o="&oslash;");for(let r=0;r<e;r++)t+=o;return t}},firstUnusedPrompt(){var e=1;if(!this.prompts.length)return e;const t=[...this.prompts];return t.sort(((e,t)=>e.page>t.page?1:-1)),t.some((t=>{let o=t.page;return o>e||(e=o+1,!1)})),e}},methods:{...(0,re.PY)("actions",["addPrompt","incrementPrompt","decrementPrompt"]),...(0,re.i0)("actions",["makePromptCurrent","removePrompt"]),...(0,re.PY)("notifications",{hideNotification:"hide"}),...(0,re.i0)("notifications",["showNotification"]),validatedAddPrompt(){const e=this.prompts.some((e=>e.page===parseInt(this.newPrompt.page,10)));if(e)return void this.showNotification({message:"This prompt already exists, you cannot re-add it",type:"warning"});const t={...this.newPrompt};t.page=parseInt(t.page,10),this.addPrompt(t),this.makeCurrent&&this.makePromptCurrent(t),this.toggleControls()},toggleControls(){this.hideNotification(),this.showControls=!this.showControls,this.newPrompt=Ue({page:this.firstUnusedPrompt,count:1}),this.makeCurrent=!this.currentPrompt||!this.currentPrompt.page}}},Ie=Be,qe=(0,m.A)(Ie,Ye,Le,!1,null,null,null),je=qe.exports,Je=function(){var e=this,t=e._self._c;return t("CardComponent",{attrs:{id:"marks"}},[t("HeadingComponent",{attrs:{level:"2"}},[e._v("Marks")]),t("FormToggleComponent",{attrs:{"show-controls":e.showAddingControls},on:{save:e.validatedAddMark,toggle:e.toggleAddingControls},scopedSlots:e._u([{key:"button",fn:function(){return[e._v(" Add a new Mark? ")]},proxy:!0},{key:"form",fn:function(){return[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMark.description,expression:"newMark.description"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.newMark.description},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validatedAddMark.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.newMark,"description",t.target.value)}}})]},proxy:!0}])}),t("FormComponent",{directives:[{name:"show",rawName:"v-show",value:e.showEditingControls,expression:"showEditingControls"}],staticClass:"my-2",attrs:{buttons:[{type:"default",event:"save",label:"Save"},{type:"default",event:"cancel",label:"Cancel"},{type:"default",event:"remove",label:"Remove"}]},on:{save:e.validatedUpdateMark,cancel:e.closeEditingControls,remove:e.validatedRemoveMark}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editMark.description,expression:"editMark.description"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.editMark.description},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validatedUpdateMark.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.editMark,"description",t.target.value)}}})]),t("transition-group",{staticClass:"my-2",attrs:{tag:"ul","enter-active-class":"transition-all duration-100 ease-out","leave-active-class":"transition-all duration-100 ease-in","enter-class":"opacity-0","enter-to-class":"opacity-100","leave-class":"opacity-100","leave-to-class":"opacity-0","move-class":"transition-transform duration-500 ease-in-out"}},e._l(e.marks,(function(o){return t("li",{key:`mark-${o.id}`,staticClass:"my-2"},[t("div",{staticClass:"grid grid-cols-6"},[t("span",{staticClass:"col-span-5"},[e._v(e._s(o.description))]),t("span",{staticClass:"cursor-pointer select-none flex-initial text-right mx-2 hover:text-gray-400",on:{click:function(t){return e.startEdit(o)}}},[e._v(" Edit ")])])])})),0)],1)},ze=[];const Ge="mark";var Qe=(e={})=>({description:"",...Pe(e,Ge)}),Ve={name:"MarksPane",data:function(){return{newMark:Qe(),editMark:Qe(),showAddingControls:!1,showEditingControls:!1}},components:{CardComponent:y,FormComponent:Ce,FormToggleComponent:Ae,HeadingComponent:R},computed:{...(0,re.aH)("marks",["marks"])},methods:{...(0,re.PY)("notifications",{hideNotification:"hide"}),...(0,re.i0)("notifications",["showNotification"]),...(0,re.PY)("marks",["add","update","remove"]),validatedAddMark(){""!==this.newMark.description?(this.add(this.newMark),this.toggleAddingControls()):this.showNotification({message:"You must provide a description",type:"warning"})},validatedRemoveMark(){let e;this.marks.some((t=>{if(t.id===this.editMark.id)return e=t,!0})),this.remove(e),this.closeEditingControls()},validatedUpdateMark(){""!==this.editMark.description?(this.update(this.editMark),this.closeEditingControls()):this.showNotification({message:"You must provide a description",type:"warning"})},startEdit(e){this.editMark=Qe(e),this.showEditingControls=!0},closeEditingControls(){this.hideNotification(),this.showEditingControls=!1,this.editMark=Qe()},toggleAddingControls(){this.hideNotification(),this.showAddingControls=!this.showAddingControls,this.newMark=Qe()}}},Ke=Ve,We=(0,m.A)(Ke,Je,ze,!1,null,null,null),Xe=We.exports,Ze=function(){var e=this,t=e._self._c;return t("CardComponent",{attrs:{id:"memories"}},[t("HeadingComponent",{attrs:{level:"2"}},[e._v("Memories")]),e.canAddMemories?t("FormToggleComponent",{attrs:{type:"primary","show-controls":e.showAddingControls},on:{save:e.validatedAddMemory,toggle:e.toggleAddingControls},scopedSlots:e._u([{key:"button",fn:function(){return[e._v(" Add a new Memory? ")]},proxy:!0},{key:"form",fn:function(){return[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMemory.description,expression:"newMemory.description"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.newMemory.description},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validatedAddMemory.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.newMemory,"description",t.target.value)}}}),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMemory.forgotten,expression:"newMemory.forgotten"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.newMemory.forgotten)?e._i(e.newMemory.forgotten,null)>-1:e.newMemory.forgotten},on:{change:function(t){var o=e.newMemory.forgotten,r=t.target,i=!!r.checked;if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.newMemory,"forgotten",o.concat([n])):a>-1&&e.$set(e.newMemory,"forgotten",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.newMemory,"forgotten",i)}}}),e._v(" Forgotten? ")]),e.hasDiary&&!e.isDiaryFull?t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMemory.diary,expression:"newMemory.diary"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":e.diary.id,"false-value":""},domProps:{checked:Array.isArray(e.newMemory.diary)?e._i(e.newMemory.diary,null)>-1:e._q(e.newMemory.diary,e.diary.id)},on:{change:function(t){var o=e.newMemory.diary,r=t.target,i=r.checked?e.diary.id:"";if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.newMemory,"diary",o.concat([n])):a>-1&&e.$set(e.newMemory,"diary",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.newMemory,"diary",i)}}}),e._v(" Diarised? ")]):e._e()]},proxy:!0}],null,!1,2362237444)}):t("div",[e._v(" You must choose to forget a memory to add more. ")]),t("FormComponent",{directives:[{name:"show",rawName:"v-show",value:e.showEditingControls,expression:"showEditingControls"}],ref:"editForm",staticClass:"my-2",attrs:{buttons:[{type:"default",event:"save",label:"Save"},{type:"default",event:"cancel",label:"Cancel"},{type:"default",event:"remove",label:"Remove"}]},on:{save:e.validatedUpdateMemory,cancel:e.closeEditingControls,remove:e.validatedRemoveMemory}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editMemory.description,expression:"editMemory.description"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.editMemory.description},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validatedUpdateMemory.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.editMemory,"description",t.target.value)}}}),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editMemory.forgotten,expression:"editMemory.forgotten"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.editMemory.forgotten)?e._i(e.editMemory.forgotten,null)>-1:e.editMemory.forgotten},on:{change:function(t){var o=e.editMemory.forgotten,r=t.target,i=!!r.checked;if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.editMemory,"forgotten",o.concat([n])):a>-1&&e.$set(e.editMemory,"forgotten",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.editMemory,"forgotten",i)}}}),e._v(" Forgotten? ")]),e.hasDiary&&!e.isDiaryFull||""!==e.editMemory.diary?t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editMemory.diary,expression:"editMemory.diary"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":e.diary.id,"false-value":""},domProps:{checked:Array.isArray(e.editMemory.diary)?e._i(e.editMemory.diary,null)>-1:e._q(e.editMemory.diary,e.diary.id)},on:{change:function(t){var o=e.editMemory.diary,r=t.target,i=r.checked?e.diary.id:"";if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.editMemory,"diary",o.concat([n])):a>-1&&e.$set(e.editMemory,"diary",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.editMemory,"diary",i)}}}),e._v(" Diarised? ")]):e._e(),e.hasEvents(e.editMemory)?t("div",{staticClass:"mt-2"},[t("HeadingComponent",{attrs:{level:"6"}},[e._v(" Events ")]),e._l(e.editEvents,(function(o){return t("div",{key:`edit-event-${o.id}`},[t("input",{directives:[{name:"model",rawName:"v-model",value:o.description,expression:"event.description"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"text",placeholder:"Description"},domProps:{value:o.description},on:{input:function(t){t.target.composing||e.$set(o,"description",t.target.value)}}})])}))],2):e._e()]),t("transition-group",{attrs:{"enter-active-class":"transition-all duration-400 ease-out","leave-active-class":"transition-all duration-400 ease-in","enter-class":"opacity-0 scale-40","enter-to-class":"opacity-100 scale-100","leave-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-40"}},e._l(e.activeMemories,(function(o){return t("MemoryComponent",{key:`memory-${o.id}`,attrs:{memory:o,"can-add-memories":e.canAddMemories,"can-add-events":o.id!==e.editMemory.id&&e.events(o).length<3,"can-diarise":e.hasDiary&&o.id!==e.editMemory.id,"can-toggle":o.id!==e.editMemory.id},on:{"add-event":e.addEvent,"remove-event":e.validatedRemoveEvent,"edit-memory":e.startEdit,"toggle-memory":e.toggleMemory,"diarise-memory":e.diariseMemory,"undiarise-memory":e.undiariseMemory}})})),1),e.hasDiary?t("SlideDownPanelComponent",{scopedSlots:e._u([{key:"closed-heading",fn:function(){return[e._v(" Diary ")]},proxy:!0}],null,!1,257998573)},[e.diaryMemories.length>0?t("div",[t("transition-group",{attrs:{"enter-active-class":"transition-all duration-400 ease-out","leave-active-class":"transition-all duration-400 ease-in","enter-class":"opacity-0 scale-40","enter-to-class":"opacity-100 scale-100","leave-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-40"}},e._l(e.diaryMemories,(function(o){return t("MemoryComponent",{key:`diary-${o.id}`,attrs:{memory:o,"can-add-memories":e.canAddMemories,"can-add-events":!1,"can-diarise":e.hasDiary,"can-toggle":o.id!==e.editMemory.id},on:{"add-event":e.addEvent,"remove-event":e.validatedRemoveEvent,"edit-memory":e.startEdit,"toggle-memory":e.toggleMemory,"diarise-memory":e.diariseMemory,"undiarise-memory":e.undiariseMemory}})})),1)],1):t("div",{staticClass:"py-2"},[e._v(" The diary is empty. ")])]):e._e(),t("SlideDownPanelComponent",{scopedSlots:e._u([{key:"closed-heading",fn:function(){return[e._v(" Forgotten Memories ")]},proxy:!0}])},[e.forgottenMemories.length>0?t("div",[t("transition-group",{attrs:{"enter-active-class":"transition-all duration-400 ease-out","leave-active-class":"transition-all duration-400 ease-in","enter-class":"opacity-0 scale-40","enter-to-class":"opacity-100 scale-100","leave-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-40"}},e._l(e.forgottenMemories,(function(o){return t("MemoryComponent",{key:`memory-${o.id}`,attrs:{memory:o,"can-add-memories":e.canAddMemories,"can-add-events":!1,"can-diarise":!1,"can-toggle":o.id!==e.editMemory.id},on:{"add-event":e.addEvent,"remove-event":e.validatedRemoveEvent,"edit-memory":e.startEdit,"toggle-memory":e.toggleMemory,"diarise-memory":e.diariseMemory,"undiarise-memory":e.undiariseMemory}})})),1)],1):t("div",{staticClass:"py-2"},[e._v(" You have forgotten no memories... yet. ")])])],1)},et=[],tt=function(){var e=this,t=e._self._c;return t("CardComponent",[t("div",{staticClass:"flex border-b mb-2"},[t("HeadingComponent",{class:{"flex-1":!0,"line-through":e.memory.forgotten},attrs:{level:"6"}},[e._v(" "+e._s(e.memory.description)+" ")]),t("div",{staticClass:"flex-initial text-right"},[t("span",{staticClass:"cursor-pointer mx-2 hover:text-gray-400",on:{click:function(t){return e.$emit("edit-memory",e.memory)}}},[e._v(" Edit ")])])],1),t("ul",{staticClass:"my-3"},e._l(e.events(e.memory),(function(o){return t("li",{key:`event-${o.id}`},[t("CardComponent",[t("div",{staticClass:"flex"},[t("span",{class:{"flex-1":!0,"line-through":e.memory.forgotten,"text-gray-400":e.memory.forgotten}},[e._v(e._s(o.description))]),t("div",{staticClass:"text-right flex-inital"},[t("RemoveCrossComponent",{on:{remove:function(t){return e.$emit("remove-event",o)}}})],1)])])],1)})),0),e.canAddEvents?t("FormToggleComponent",{attrs:{showControls:e.showControls},on:{save:e.add,toggle:e.toggleControls},scopedSlots:e._u([{key:"button",fn:function(){return[e._v(" Add an Event? ")]},proxy:!0},{key:"form",fn:function(){return[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newEvent.description,expression:"newEvent.description"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.newEvent.description},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.add.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.newEvent,"description",t.target.value)}}})]},proxy:!0}],null,!1,667397553)}):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.canToggle&&(!e.memory.forgotten||e.memory.forgotten&&""!==e.memory.diary||e.canAddMemories),expression:"canToggle && ((!memory.forgotten || memory.forgotten && memory.diary !== '') || canAddMemories)"}],staticClass:"my-2 grid grid-rows gap-2"},[t("ButtonComponent",{staticClass:"w-full",on:{click:function(t){return e.$emit("toggle-memory",e.memory)}}},[e.memory.forgotten?t("span",[e._v(" Recover Memory ")]):""===e.memory.diary?t("span",[e._v(" Forget Memory ")]):t("span",[e._v(" Scratch Out Memory ")])]),e.canDiarise?[""!==e.memory.diary||e.isDiaryFull?""!==e.memory.diary&&e.canAddMemories?t("ButtonComponent",{staticClass:"w-full",on:{click:function(t){return e.$emit("undiarise-memory",e.memory)}}},[e._v(" Recover from Diary ")]):e._e():t("ButtonComponent",{staticClass:"w-full",on:{click:function(t){return e.$emit("diarise-memory",e.memory)}}},[e._v(" Send to Diary ")])]:e._e()],2)],1)},ot=[],rt=function(){var e=this,t=e._self._c;return t("span",{staticClass:"cursor-pointer select-none mx-1 hover:text-gray-400",attrs:{title:"Remove item"},domProps:{innerHTML:e._s("&times;")},on:{click:function(t){return e.$emit("remove")}}})},it=[],nt={name:"RemoveCrossComponent"},at=nt,st=(0,m.A)(at,rt,it,!1,null,null,null),lt=st.exports;const dt="memory",ct="event",ut=(e={})=>({description:"",forgotten:!1,diary:"",...Pe(e,dt)}),mt=(e={})=>({description:"",memory:"",...Pe(e,ct)});var pt={name:"MemoryComponent",props:{memory:{type:Object,required:!0,validator:e=>"string"===typeof e.diary&&"boolean"===typeof e.forgotten},canAddMemories:{type:Boolean,required:!0},canAddEvents:{type:Boolean,required:!0},canDiarise:{type:Boolean,required:!0},canToggle:{type:Boolean,required:!0}},data:function(){return{showControls:!1,newEvent:mt({memory:this.memory.id})}},components:{ButtonComponent:k,CardComponent:y,FormToggleComponent:Ae,HeadingComponent:R,RemoveCrossComponent:lt},computed:{...(0,re.L8)("resources",["hasDiary","isDiaryFull"]),...(0,re.L8)("memories",["events"])},methods:{...(0,re.PY)("notifications",{hideNotification:"hide"}),...(0,re.i0)("notifications",["showNotification"]),add(){if(""===this.newEvent.description)return void this.showNotification({message:"You must provide a description",type:"warning"});const e=mt(this.newEvent);this.$emit("add-event",e),this.toggleControls()},toggleControls(){this.hideNotification(),this.showControls=!this.showControls,this.newEvent=mt({memory:this.memory.id})}}},yt=pt,gt=(0,m.A)(yt,tt,ot,!1,null,null,null),ht=gt.exports,vt={name:"MemoriesPane",data(){return{showAddingControls:!1,showEditingControls:!1,editMemory:ut(),editEvents:[],newMemory:ut()}},components:{CardComponent:y,FormComponent:Ce,FormToggleComponent:Ae,HeadingComponent:R,MemoryComponent:ht,SlideDownPanelComponent:O},computed:{...(0,re.aH)("memories",["memories"]),...(0,re.L8)("memories",["canAddMemories","forgottenMemories","activeMemories","events","hasEvents"]),...(0,re.L8)("resources",{diary:"diary",hasDiary:"hasDiary",isDiaryFull:"isDiaryFull",diaryMemories:"memories"})},methods:{...(0,re.PY)("notifications",{hideNotification:"hide"}),...(0,re.i0)("notifications",["showNotification"]),...(0,re.PY)("memories",["addMemory","updateMemory","removeMemory","toggleMemory","addEvent","removeEvent","diarise","undiarise","updateEvent"]),validatedAddMemory(){if(this.hideNotification,""===this.newMemory.description)return void this.showNotification({message:"You must provide a description.",type:"warning"});const e=ut(this.newMemory);this.addMemory(e),this.toggleAddingControls()},validatedRemoveMemory(){this.hasEvents(this.editMemory)&&this.events(this.editMemory).forEach((e=>{this.removeEvent(e)})),this.removeMemory(this.editMemory),this.closeEditingControls()},validatedRemoveEvent(e){e.memory!==this.editMemory.id?this.removeEvent(e):this.showNotification({message:"You cannot alter this memory whilst it is being edited.",type:"warning"})},validatedUpdateMemory(){this.updateMemory(this.editMemory),this.hasEvents(this.editMemory)&&this.editEvents.forEach((e=>this.updateEvent(e))),this.closeEditingControls()},diariseMemory(e){this.diarise({diary:this.diary,memory:e})},undiariseMemory(e){this.undiarise(e)},startEdit(e){this.editMemory=ut(e),this.editEvents=this.events(this.editMemory).map((e=>mt(e))),this.showEditingControls=!0,this.$nextTick((()=>{const e=this.$refs.editForm.$el.getBoundingClientRect();window.scrollTo({top:e.y+window.scrollY,behavior:"smooth"})}))},toggleAddingControls(){this.newMemory=ut(),this.showAddingControls=!this.showAddingControls},closeEditingControls(){this.hideNotification(),this.showEditingControls=!1,this.editMemory=ut(),this.editEvents=[]}}},ft=vt,Ct=(0,m.A)(ft,Ze,et,!1,null,null,null),wt=Ct.exports,kt=function(){var e=this,t=e._self._c;return t("transition",{attrs:{"enter-active-class":"transition-all duration-400 ease-out","leave-active-class":"transition-all duration-400 ease-in","enter-class":"opacity-0 scale-40","enter-to-class":"opacity-100 scale-100","leave-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-40"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:e.classes},[t("div",{staticClass:"flex-1"},[e._v(" "+e._s(e.message)+" ")]),t("RemoveCrossComponent",{staticClass:"flex-initial",on:{remove:e.hide}})],1)])},xt=[];const _t={default:{"border-indigo-400":!0,"bg-indigo-100":!0,"text-indigo-600":!0},danger:{"border-red-600":!0,"bg-red-200":!0,"text-red-800":!0},warning:{"border-yellow-400":!0,"bg-yellow-100":!0,"text-yellow-600":!0}};var bt=null,At={name:"NotificationPane",components:{RemoveCrossComponent:lt},data(){return{timeout:5e3}},computed:{...(0,re.aH)("notifications",["visible","message","type"]),classes(){return{sticky:!0,"inset-6":!0,border:!0,rounded:!0,"p-2":!0,flex:!0,..._t[this.type]}}},methods:{...(0,re.PY)("notifications",["hide"])},watch:{visible(e){clearTimeout(bt),e&&(bt=setTimeout((()=>{this.hide()}),this.timeout))}}},Mt=At,Pt=(0,m.A)(Mt,kt,xt,!1,null,null,null),Rt=Pt.exports,St=function(){var e=this,t=e._self._c;return t("CardComponent",{staticClass:"m-1 p-4 border-2 border-gray-100",attrs:{id:"resources"}},[t("HeadingComponent",{attrs:{level:"2"}},[e._v("Resources")]),t("FormToggleComponent",{staticClass:"my-2",attrs:{"show-controls":e.showAddingResourceControls},on:{save:e.validatedAddResource,toggle:e.toggleAddingResourceControls},scopedSlots:e._u([{key:"button",fn:function(){return[e._v(" Add a new Resource? ")]},proxy:!0},{key:"form",fn:function(){return[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newResource.name,expression:"newResource.name"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.newResource.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validatedAddResource.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.newResource,"name",t.target.value)}}}),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newResource.lost,expression:"newResource.lost"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.newResource.lost)?e._i(e.newResource.lost,null)>-1:e.newResource.lost},on:{change:function(t){var o=e.newResource.lost,r=t.target,i=!!r.checked;if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.newResource,"lost",o.concat([n])):a>-1&&e.$set(e.newResource,"lost",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.newResource,"lost",i)}}}),e._v(" Lost? ")]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newResource.stationary,expression:"newResource.stationary"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.newResource.stationary)?e._i(e.newResource.stationary,null)>-1:e.newResource.stationary},on:{change:function(t){var o=e.newResource.stationary,r=t.target,i=!!r.checked;if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.newResource,"stationary",o.concat([n])):a>-1&&e.$set(e.newResource,"stationary",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.newResource,"stationary",i)}}}),e._v(" Stationary? ")])]},proxy:!0}])}),e.hasDiary?e._e():t("FormToggleComponent",{attrs:{"show-controls":e.showAddingDiaryControls},on:{save:e.validatedAddDiary,toggle:e.toggleAddingDiaryControls},scopedSlots:e._u([{key:"button",fn:function(){return[e._v(" Add a Diary? ")]},proxy:!0},{key:"form",fn:function(){return[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newDiary.name,expression:"newDiary.name"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"text",placeholder:"Name"},domProps:{value:e.newDiary.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addDiary.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.newDiary,"name",t.target.value)}}}),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newDiary.lost,expression:"newDiary.lost"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.newDiary.lost)?e._i(e.newDiary.lost,null)>-1:e.newDiary.lost},on:{change:function(t){var o=e.newDiary.lost,r=t.target,i=!!r.checked;if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.newDiary,"lost",o.concat([n])):a>-1&&e.$set(e.newDiary,"lost",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.newDiary,"lost",i)}}}),e._v(" Lost? ")])]},proxy:!0}],null,!1,4200738096)}),t("FormComponent",{directives:[{name:"show",rawName:"v-show",value:e.showEditingResourceControls,expression:"showEditingResourceControls"}],staticClass:"my-2",attrs:{buttons:[{type:"default",event:"save",label:"Save"},{type:"default",event:"cancel",label:"Cancel"},{type:"default",event:"remove",label:"Remove"}]},on:{save:e.validatedUpdateResource,cancel:e.closeEditingResourceControls,remove:e.validatedRemoveResource}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editResource.name,expression:"editResource.name"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.editResource.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validatedAddResource.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.editResource,"name",t.target.value)}}}),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editResource.lost,expression:"editResource.lost"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.editResource.lost)?e._i(e.editResource.lost,null)>-1:e.editResource.lost},on:{change:function(t){var o=e.editResource.lost,r=t.target,i=!!r.checked;if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.editResource,"lost",o.concat([n])):a>-1&&e.$set(e.editResource,"lost",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.editResource,"lost",i)}}}),e._v(" Lost? ")]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editResource.stationary,expression:"editResource.stationary"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.editResource.stationary)?e._i(e.editResource.stationary,null)>-1:e.editResource.stationary},on:{change:function(t){var o=e.editResource.stationary,r=t.target,i=!!r.checked;if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.editResource,"stationary",o.concat([n])):a>-1&&e.$set(e.editResource,"stationary",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.editResource,"stationary",i)}}}),e._v(" Stationary? ")])]),t("FormComponent",{directives:[{name:"show",rawName:"v-show",value:e.showEditingDiaryControls,expression:"showEditingDiaryControls"}],staticClass:"my-2",attrs:{buttons:[{type:"default",event:"save",label:"Save"},{type:"default",event:"cancel",label:"Cancel"},{type:"default",event:"remove",label:"Remove"}]},on:{save:e.validatedUpdateDiary,cancel:e.closeEditingDiaryControls,remove:e.validatedRemoveDiary}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editDiary.name,expression:"editDiary.name"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.editDiary.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validatedAddResource.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.editDiary,"name",t.target.value)}}}),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editDiary.lost,expression:"editDiary.lost"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.editDiary.lost)?e._i(e.editDiary.lost,null)>-1:e.editDiary.lost},on:{change:function(t){var o=e.editDiary.lost,r=t.target,i=!!r.checked;if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.editDiary,"lost",o.concat([n])):a>-1&&e.$set(e.editDiary,"lost",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.editDiary,"lost",i)}}}),e._v(" Lost? ")])]),t("transition-group",{staticClass:"my-2 pb-2",attrs:{tag:"ul","enter-active-class":"transition-all duration-100 ease-out","leave-active-class":"transition-all duration-100 ease-in","enter-class":"opacity-0","enter-to-class":"opacity-100","leave-class":"opacity-100","leave-to-class":"opacity-0","move-class":"transition-transform duration-500 ease-in-out"}},e._l(e.resources,(function(o){return t("li",{key:`resource-${o.id}`,staticClass:"select-none"},[t("div",{staticClass:"grid grid-cols-6"},[t("span",{staticClass:"col-span-5"},[t("span",{staticClass:"cursor-pointer hover:text-gray-400",on:{click:function(t){return e.validatedToggleResource(o)}}},[t("span",{class:{"line-through":o.lost}},[e._v(e._s(o.name))]),o.stationary?t("span",[e._v(" (stationary)")]):e._e()])]),t("span",{staticClass:"cursor-pointer select-none flex-initial text-right mx-2 hover:text-gray-400",on:{click:function(t){return e.startEditResource(o)}}},[e._v(" Edit ")])])])})),0),t("transition-group",{directives:[{name:"show",rawName:"v-show",value:e.diaries.length>0,expression:"diaries.length > 0"}],staticClass:"my-2 border-t pt-2",attrs:{tag:"ul","enter-active-class":"transition-all duration-100 ease-out","leave-active-class":"transition-all duration-100 ease-in","enter-class":"opacity-0","enter-to-class":"opacity-100","leave-class":"opacity-100","leave-to-class":"opacity-0","move-class":"transition-transform duration-500 ease-in-out"}},e._l(e.diaries,(function(o){return t("li",{key:`diary-${o.id}`,staticClass:"select-none"},[t("div",{staticClass:"grid grid-cols-6"},[t("span",{staticClass:"col-span-5"},[t("span",{staticClass:"cursor-pointer hover:text-gray-400",on:{click:function(t){return e.validatedToggleDiary(o)}}},[t("span",{class:{"line-through":o.lost}},[e._v(e._s(o.name))]),t("span",{staticClass:"italic"},[e._v(" (diary - "+e._s(e.activeMemories.length)+" of 4 memories)")])])]),t("span",{staticClass:"cursor-pointer select-none flex-initial text-right mx-2 hover:text-gray-400",on:{click:function(t){return e.startEditDiary(o)}}},[e._v(" Edit ")])])])})),0)],1)},Et=[];const Dt="resource",Nt="diary",$t=(e={})=>({name:"",lost:!1,stationary:!1,...Pe(e,Dt)}),Tt=(e={})=>({name:"",lost:!1,...Pe(e,Nt)});var Ft={name:"ResourcesPane",data:function(){return{showAddingResourceControls:!1,showAddingDiaryControls:!1,showEditingResourceControls:!1,showEditingDiaryControls:!1,newResource:$t(),newDiary:Tt(),editResource:$t(),editDiary:Tt()}},components:{CardComponent:y,FormComponent:Ce,FormToggleComponent:Ae,HeadingComponent:R},computed:{...(0,re.L8)("resources",["hasDiary","diaries","resources","diary","activeMemories"])},methods:{...(0,re.PY)("notifications",{hideNotification:"hide"}),...(0,re.i0)("notifications",["showNotification"]),...(0,re.PY)("resources",["addResource","updateResource","removeResource","toggleResource","addDiary","updateDiary","removeDiary","toggleDiary"]),validatedAddResource(){""!==this.newResource.name?(this.addResource(this.newResource),this.toggleAddingResourceControls()):this.showNotification({message:"You must provide a description.",type:"warning"})},validatedToggleResource(e){this.hideNotification(),this.editResource.id!==e.id?this.toggleResource(e):this.showNotification({message:"You cannot change this resource whilst it is being edited.",type:"warning"})},validatedToggleDiary(e){if(this.hideNotification(),this.editDiary.id!==e.id){if(this.hasDiary){if(e.lost)return void this.showNotification({message:"You may only have one active diary.",type:"warning"});if(this.memories.length>0)return void this.showNotification({message:"Please cross out existing memories before losing the diary.",type:"warning"})}this.toggleDiary(e)}else this.showNotification({message:"You cannot change this resource whilst it is being edited.",type:"warning"})},validatedAddDiary(){""!==this.newDiary.name?this.hasDiary?this.showNotification({message:"You may only have one active diary.",type:"warning"}):(this.addDiary(this.newDiary),this.toggleAddingDiaryControls()):this.showNotification({message:"You must provide a description.",type:"warning"})},validatedUpdateResource(){""!==this.editResource.name?(this.updateResource(this.editResource),this.closeEditingResourceControls()):this.showNotification({message:"You must provide a description.",type:"warning"})},validatedUpdateDiary(){""!==this.editDiary.name?this.diary&&this.editDiary.id!==this.diary.id&&!1===this.editDiary.lost?this.showNotification({message:"You may only have one active diary.",type:"warning"}):(this.updateDiary(this.editDiary),this.closeEditingDiaryControls()):this.showNotification({message:"You must provide a description.",type:"warning"})},validatedRemoveResource(){let e;this.resources.some((t=>{if(t.id===this.editResource.id)return e=t,!0})),this.removeResource(e),this.closeEditingResourceControls()},validatedRemoveDiary(){let e;this.diaries.some((t=>{if(t.id===this.editDiary.id)return e=t,!0})),this.removeDiary(e),this.closeEditingDiaryControls()},startEditResource(e){this.editResource=$t(e),this.showEditingResourceControls=!0},startEditDiary(e){this.editDiary=Tt(e),this.showEditingDiaryControls=!0},toggleAddingResourceControls(){this.hideNotification(),this.showAddingResourceControls=!this.showAddingResourceControls,this.newResource=$t()},toggleAddingDiaryControls(){this.hideNotification(),this.showAddingDiaryControls=!this.showAddingDiaryControls,this.newDiary=Tt()},closeEditingResourceControls(){this.hideNotification(),this.showEditingResourceControls=!1,this.editResource=$t()},closeEditingDiaryControls(){this.hideNotification(),this.showEditingDiaryControls=!1,this.editDiary=Tt()}}},Ot=Ft,Yt=o(1994),Lt=o.n(Yt),Ht=(0,m.A)(Ot,St,Et,!1,null,null,null);"function"===typeof Lt()&&Lt()(Ht);var Ut=Ht.exports,Bt=function(){var e=this,t=e._self._c;return t("CardComponent",{attrs:{id:"skills"}},[t("HeadingComponent",{attrs:{level:"2"}},[e._v("Skills")]),t("FormToggleComponent",{attrs:{"show-controls":e.showAddingControls},on:{save:e.validatedAddSkill,toggle:e.toggleAddingControls},scopedSlots:e._u([{key:"button",fn:function(){return[e._v(" Add a new Skill? ")]},proxy:!0},{key:"form",fn:function(){return[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newSkill.name,expression:"newSkill.name"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.newSkill.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validatedAddSkill.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.newSkill,"name",t.target.value)}}}),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newSkill.checked,expression:"newSkill.checked"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.newSkill.checked)?e._i(e.newSkill.checked,null)>-1:e.newSkill.checked},on:{change:function(t){var o=e.newSkill.checked,r=t.target,i=!!r.checked;if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.newSkill,"checked",o.concat([n])):a>-1&&e.$set(e.newSkill,"checked",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.newSkill,"checked",i)}}}),e._v(" Checked? ")])]},proxy:!0}])}),t("FormComponent",{directives:[{name:"show",rawName:"v-show",value:e.showEditingControls,expression:"showEditingControls"}],staticClass:"my-2",attrs:{buttons:[{type:"default",event:"save",label:"Save"},{type:"default",event:"cancel",label:"Cancel"},{type:"default",event:"remove",label:"Remove"}]},on:{save:e.validatedUpdateSkill,cancel:e.closeEditingControls,remove:e.validatedRemoveSkill}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editSkill.name,expression:"editSkill.name"}],staticClass:"shadow appearance-none border rounded w-full py-1 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.editSkill.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validatedUpdateSkill.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.editSkill,"name",t.target.value)}}}),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editSkill.checked,expression:"editSkill.checked"}],staticClass:"shadow border rounded py-2 px-2 m-1 text-gray-700 leading-tight focus:outline-none focus:ring-2 ring-gray-200",attrs:{type:"checkbox","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.editSkill.checked)?e._i(e.editSkill.checked,null)>-1:e.editSkill.checked},on:{change:function(t){var o=e.editSkill.checked,r=t.target,i=!!r.checked;if(Array.isArray(o)){var n=null,a=e._i(o,n);r.checked?a<0&&e.$set(e.editSkill,"checked",o.concat([n])):a>-1&&e.$set(e.editSkill,"checked",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(e.editSkill,"checked",i)}}}),e._v(" Checked? ")])]),t("transition-group",{staticClass:"my-2",attrs:{tag:"ul","enter-active-class":"transition-all duration-100 ease-out","leave-active-class":"transition-all duration-100 ease-in","enter-class":"opacity-0","enter-to-class":"opacity-100","leave-class":"opacity-100","leave-to-class":"opacity-0","move-class":"transition-transform duration-500 ease-in-out"}},e._l(e.skills,(function(o){return t("li",{key:`skill-${o.id}`,staticClass:"select-none"},[t("div",{staticClass:"grid grid-cols-6"},[t("span",{staticClass:"col-span-5"},[t("span",{staticClass:"cursor-pointer hover:text-gray-400",on:{click:function(t){return e.validatedToggleSkill(o)}}},[t("span",[e._v(e._s(o.name))]),o.checked?t("span",[e._v(" (x) ")]):e._e()])]),t("span",{staticClass:"cursor-pointer select-none flex-initial text-right mx-2 hover:text-gray-400",on:{click:function(t){return e.startEdit(o)}}},[e._v(" Edit ")])])])})),0)],1)},It=[];const qt="skill";var jt=(e={})=>({name:"",checked:!1,...Pe(e,qt)}),Jt={name:"SkillsPane",data:function(){return{showAddingControls:!1,showEditingControls:!1,newSkill:jt(),editSkill:jt()}},components:{CardComponent:y,FormComponent:Ce,FormToggleComponent:Ae,HeadingComponent:R},computed:{...(0,re.L8)("skills",["skills"])},methods:{...(0,re.PY)("notifications",{hideNotification:"hide"}),...(0,re.i0)("notifications",["showNotification"]),...(0,re.PY)("skills",["add","remove","toggle","update"]),validatedAddSkill(){""!==this.newSkill.name?(this.add(this.newSkill),this.toggleAddingControls()):this.showNotification({message:"You must provide a description.",type:"warning"})},startEdit(e){this.editSkill=jt(e),this.showEditingControls=!0},validatedToggleSkill(e){this.hideNotification(),this.editSkill.id!==e.id?this.toggle(e):this.showNotification({message:"You cannot change this skill whilst it is being edited.",type:"warning"})},validatedUpdateSkill(){""!==this.editSkill.name?(this.update(this.editSkill),this.closeEditingControls()):this.showNotification({message:"You must provide a description",type:"warning"})},validatedRemoveSkill(){let e;this.skills.some((t=>{if(t.id===this.editSkill.id)return e=t,!0})),this.remove(e),this.closeEditingControls()},toggleAddingControls(){this.hideNotification(),this.showAddingControls=!this.showAddingControls,this.newSkill=jt()},closeEditingControls(){this.hideNotification(),this.showEditingControls=!1,this.editSkill=jt()}}},zt=Jt,Gt=(0,m.A)(zt,Bt,It,!1,null,null,null),Qt=Gt.exports,Vt={name:"App",components:{ActionsPane:ue,PromptsPane:je,MarksPane:Xe,SkillsPane:Qt,ResourcesPane:Ut,CharactersPane:Oe,HeadingComponent:R,MemoriesPane:wt,NotificationPane:Rt,SlideDownPanelComponent:O},computed:{copyright(){const e=Math.max(2021,(new Date).getUTCFullYear());return`Copyright &copy; ${e} Robin Malburn`}}},Kt=Vt,Wt=(0,m.A)(Kt,i,n,!1,null,null,null),Xt=Wt.exports;const Zt=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),eo={...q("actions")},to={die:e=>e.d10-e.d6,currentRoll:(e,t)=>isNaN(t.die)?"?":`${t.die} (+${e.d10}, -${e.d6})`,prompts:e=>{const t=[...e.prompts];return t.sort(((e,t)=>e.page>t.page?-1:1)),t},currentPrompt:e=>e.prompts[e.currentPromptIdx]??{}},oo={rollD6:e=>e.d6=Zt(1,6),setD6:(e,t)=>e.d6=t,setD10:(e,t)=>e.d10=t,rollD10:e=>e.d10=Zt(1,10),saveRoll:(e,t)=>e.lastRoll=t,makePrompt:(e,t)=>e.prompts.push(Ue({page:t,count:0})),addPrompt:(e,t)=>e.prompts.push(Ue(t)),setPrompts:(e,t)=>e.prompts=t,removePrompt:(e,t)=>{const o=Ee(e.prompts,t.id);e.prompts.splice(o.idx,1)},incrementPrompt:(e,t)=>{const o=Ee(e.prompts,t.id);r.Ay.set(o.entity,"count",o.entity.count+1)},decrementPrompt:(e,t)=>{const o=Ee(e.prompts,t.id);r.Ay.set(o.entity,"count",o.entity.count-1)},setCurrentPromptIdx:(e,t)=>e.currentPromptIdx=t},ro={roll:({commit:e,getters:t,state:o})=>{e("saveRoll",t.currentRoll),e("rollD6"),e("rollD10");let r=(t.currentPrompt&&t.currentPrompt.page)??0;r+=t.die,r<=0&&(r=1);var i=o.currentPromptIdx;const n=o.prompts.some(((e,t)=>{if(e.page===r)return i=t,3===e.count&&(i+=1,r+=1),!0}));n||(i=o.prompts.length);var a=o.prompts[i];a||(a=Ue({page:r}),e("addPrompt",a)),e("incrementPrompt",a),e("setCurrentPromptIdx",i)},makePromptCurrent({commit:e,state:t},o){const r=Ee(t.prompts,o.id);e("setCurrentPromptIdx",r.idx)},removePrompt({commit:e,getters:t,state:o},r){const i=t.currentPrompt;e("removePrompt",r);const n=Ee(o.prompts,i.id);e("setCurrentPromptIdx",n.idx)}};var io={namespaced:!0,state:eo,getters:to,mutations:oo,actions:ro};const no={...q("characters")},ao={characters:e=>[...e.characters].sort(((e,t)=>e.dead&&!t.dead?1:!e.dead&&t.dead?-1:e.name.localeCompare(t.name)))},so={add:(e,t)=>e.characters.push(Ne(t)),update:(e,t)=>{const o=Ee(e.characters,t.id);r.Ay.set(e.characters,o.idx,Ne(t))},set:(e,t)=>e.characters=t,remove:(e,t)=>{const o=Ee(e.characters,t.id);e.characters.splice(o.idx,1)},toggle:(e,t)=>{const o=Ee(e.characters,t.id);r.Ay.set(o.entity,"dead",!o.entity.dead)}};var lo={namespaced:!0,state:no,getters:ao,mutations:so};const co={...q("marks")},uo={add:(e,t)=>e.marks.push(Qe(t)),update:(e,t)=>{const o=Ee(e.marks,t.id);r.Ay.set(e.marks,o.idx,Qe(t))},set:(e,t)=>e.marks=t,remove:(e,t)=>{const o=Ee(e.marks,t.id);e.marks.splice(o.idx,1)}};var mo={namespaced:!0,state:co,mutations:uo};o(4520),o(8872);const po={...q("memories")},yo={active:e=>e.memories.reduce(((e,t)=>!1===t.forgotten&&""===t.diary?e+1:e),0),canAddMemories:(e,t)=>t.active<5,forgottenMemories:e=>e.memories.filter((e=>e.forgotten&&""===e.diary)),activeMemories:e=>e.memories.filter((e=>!e.forgotten&&""===e.diary)),events:e=>t=>e.events.filter((e=>e.memory===t.id)),hasEvents:e=>t=>e.events.some((e=>e.memory===t.id))},go={addMemory:(e,t)=>e.memories.push(ut(t)),setMemories:(e,t)=>e.memories=t,updateMemory:(e,t)=>{const o=Ee(e.memories,t.id);r.Ay.set(e.memories,o.idx,ut(t))},removeMemory:(e,t)=>{const o=Ee(e.memories,t.id);e.memories.splice(o.idx,1)},toggleMemory:(e,t)=>{const o=Ee(e.memories,t.id);r.Ay.set(o.entity,"forgotten",!o.entity.forgotten)},addEvent:(e,t)=>e.events.push(mt(t)),setEvents:(e,t)=>e.events=t,updateEvent:(e,t)=>{const o=Ee(e.events,t.id);r.Ay.set(e.events,o.idx,mt(t))},removeEvent:(e,t)=>{const o=Ee(e.events,t.id);e.events.splice(o.idx,1)},diarise:(e,{memory:t,diary:o})=>{const i=Ee(e.memories,t.id);r.Ay.set(i.entity,"diary",o.id)},undiarise:(e,t)=>{const o=Ee(e.memories,t.id);r.Ay.set(o.entity,"diary","")}};var ho={namespaced:!0,state:po,getters:yo,mutations:go};const vo={message:"",visible:!1,type:"default"},fo={toggle:e=>e.visible=!e.visible,hide:e=>e.visible=!1,show:e=>e.visible=!0,setMessage:(e,t)=>e.message=t,setType:(e,t)=>e.type=t},Co={showNotification({commit:e},{message:t,type:o}){e("hide"),e("setMessage",t),e("setType",o),e("show")}};var wo={namespaced:!0,state:vo,mutations:fo,actions:Co};const ko={...q("resources")},xo={resources:e=>[...e.resources].sort(((e,t)=>e.lost&&!t.lost?1:!e.lost&&t.lost?-1:e.name.localeCompare(t.name))),diaries:e=>[...e.diaries].sort(((e,t)=>e.lost&&!t.lost?1:!e.lost&&t.lost?-1:e.name.localeCompare(t.name))),diary:e=>e.diaries.filter((e=>!e.lost))[0]||null,lostDiaries:e=>e.diaries.filter((e=>e.lost)),hasDiary:(e,t)=>null!==t.diary,memories:(e,t,o)=>o.memories.memories.filter((e=>e.diary===t.diary.id)),activeMemories:(e,t)=>t.memories.filter((e=>!e.forgotten)),forgottenMemories:(e,t)=>t.memories.filter((e=>e.forgotten)),isDiaryFull:(e,t)=>{let o=0;return t.memories.some((e=>(e.lost||(o+=1),o>=4)))}},_o={addResource:(e,t)=>e.resources.push($t(t)),setResources:(e,t)=>e.resources=t,updateResource:(e,t)=>{const o=Ee(e.resources,t.id);r.Ay.set(e.resources,o.idx,$t(t))},removeResource:(e,t)=>{const o=Ee(e.resources,t.id);e.resources.splice(o.idx,1)},toggleResource:(e,t)=>{const o=Ee(e.resources,t.id);r.Ay.set(o.entity,"lost",!o.entity.lost)},addDiary:(e,t)=>e.diaries.push(Tt(t)),updateDiary:(e,t)=>{const o=Ee(e.diaries,t.id);r.Ay.set(e.diaries,o.idx,Tt(t))},setDiaries:(e,t)=>e.diaries=t,removeDiary:(e,t)=>{const o=Ee(e.diaries,t.id);e.diaries.splice(o.idx,1)},toggleDiary:(e,t)=>{const o=Ee(e.diaries,t.id);r.Ay.set(o.entity,"lost",!o.entity.lost)}};var bo={namespaced:!0,state:ko,getters:xo,mutations:_o};const Ao={...q("skills")},Mo={skills:e=>[...e.skills].sort(((e,t)=>e.checked&&t.checked||!e.checked&&!t.checked?e.name.localeCompare(t.name):e.checked&&!t.checked?1:-1))},Po={add:(e,t)=>e.skills.push(jt(t)),set:(e,t)=>e.skills=t,update:(e,t)=>{const o=Ee(e.skills,t.id);r.Ay.set(e.skills,o.idx,jt(t))},remove:(e,t)=>{const o=Ee(e.skills,t.id);e.skills.splice(o.idx,1)},toggle:(e,t)=>{const o=Ee(e.skills,t.id);r.Ay.set(o.entity,"checked",!o.entity.checked)}};var Ro={namespaced:!0,state:Ao,mutations:Po,getters:Mo};r.Ay.use(re.Ay);var So=new re.Ay.Store({state:{},mutations:{},actions:{},modules:{actions:io,characters:lo,marks:mo,memories:ho,notifications:wo,resources:bo,skills:Ro}});r.Ay.config.productionTip=!1,new r.Ay({store:So,render:e=>e(Xt)}).$mount("#app")}},t={};function o(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,r,i,n){if(!r){var a=1/0;for(c=0;c<e.length;c++){r=e[c][0],i=e[c][1],n=e[c][2];for(var s=!0,l=0;l<r.length;l++)(!1&n||a>=n)&&Object.keys(o.O).every((function(e){return o.O[e](r[l])}))?r.splice(l--,1):(s=!1,n<a&&(a=n));if(s){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[r,i,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,r){return o.f[r](e,t),t}),[]))}}(),function(){o.u=function(e){return"js/"+e+"."+{22:"3751833c",84:"6871b786",310:"e360cd67",342:"4c2d73ab",546:"0165a759",683:"d2278647",688:"94b6603d"}[e]+".js"}}(),function(){o.miniCssF=function(e){}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="tyov:";o.l=function(r,i,n,a){if(e[r])e[r].push(i);else{var s,l;if(void 0!==n)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+n){s=u;break}}s||(l=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",t+n),s.src=r),e[r]=[i];var m=function(t,o){s.onerror=s.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(o)})),t)return t(o)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=m.bind(null,s.onerror),s.onload=m.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/tyov/"}(),function(){var e={524:0};o.f.j=function(t,r){var i=o.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var n=new Promise((function(o,r){i=e[t]=[o,r]}));r.push(i[2]=n);var a=o.p+o.u(t),s=new Error,l=function(r){if(o.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var n=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",s.name="ChunkLoadError",s.type=n,s.request=a,i[1](s)}};o.l(a,l,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,r){var i,n,a=r[0],s=r[1],l=r[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(l)var c=l(o)}for(t&&t(r);d<a.length;d++)n=a[d],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(c)},r=self["webpackChunktyov"]=self["webpackChunktyov"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],(function(){return o(4230)}));r=o.O(r)})();
//# sourceMappingURL=app.db9cbf33.js.map